# Debug

Сегодня мы попробуем разобраться для чего нам нужна отладка и как она работает.

Во первых отладка нужна для изменения параметров нашего сайта т.е цвет, размер, физика, обьект и тд. Чтобы мы в очередной раз не изменяли код для просмотра новых параметров, а нашли их в меню разработчика и просто вставили в код.

## lil-gui

Для добавления `lil-gui` для нашего проекта, мы можем использовать менеджер зависимостей `yarn`.

В вашем терминале (пока сервер не запущен) запустите `yarn add lil-gui`

Теперь мы можем импортировать его в наш script.js. Не забудьте перезапустить сервер:

```javascript
import * as dat from "lil-gui";
// ...
``` 

Далее создаем переменную с нашим интерфейсом:

```javascript
//Debug
const gui = new dat.GUI();
```

В результате в правом верхнем углу экрана появится пустая панель.

На эту панель можно добавлять элементы разных типов:

- Цвет — для цветов с различными форматами
- Текст — для простых текстов
- checkbox — true false
- список — для выбора из списка значений
- Кнопка — для запуска функций
- Папка — для организации панели, если у вас слишком много элементов

Давайте посмотрим на некоторые из них.

## Добавление элементов

Чтобы добавить элемент на панель, вы должны использовать `gui.add(...)`. Первый параметр - это объект, а второй параметр - свойство того объекта, который вы хотите настроить. Его необходимо установить после создания соответствующего объекта:

```javascript
gui.add(mesh.position, "y");
```

На панели должен появиться диапазон. Попробуйте изменить его и посмотрите, как куб движется соответствующим образом.

Чтобы указать min-max и точность, вы можете задать их в параметрах:

```javascript
gui.add(mesh.position, "y", -3, 3, 0.01);
```

Или вы можете использовать методы `min(...)`,`max(...)`и `step(...)` путем объединения в цепочку после метода `add(...)`:

```javascript
gui.add(mesh.position, "y").min(-3).max(3).step(0.01);
```

Чтобы изменить метку, используйте метод `name(...)`:

```javascript
gui.add(mesh.position, "y").min(-3).max(3).step(0.01).name("elevation");
```

Dat.gui может само определить, какое свойство вы хотите настроить и какой элемент оно использует. Хорошим примером является свойство `visible` для нашего объекта . Это значение `boolean (true,false)`

```javascript
gui.add(mesh, "visible");
```

## Цвет

Обработка цветов немного сложнее.

- нам нужно использовать `addColor(...)` вместо `add(...)`. Это связано с тем, что dat.gui не может определить что вы хотите сделать изменить цвет или число

- вам нужно будет создать объект (как мы это делали с `sizes`) с цветом в его свойствах и использовать это свойство в вашем материале. Это связано с Three.js

На самом деле,тк мы используем обновлённую библиотеку мы можем использовать `addColor` на самом материале. Но поскольку техника, которую мы собираемся увидеть, может использоваться в других случаях, мы все равно ее увидим.

Создайте `parameter` переменную в начале вашего кода сразу после `import` части:

```javascript
const parameters = {
  color: 0xff0000,
};
```

затем добавляем цвет в нашу менюшку:

```javascript
gui.addColor(parameters, "color");
```

Сейчас при попытке изменения цвета ничего не поменяется, это связано с тем что мы меняем сам `параметр` у `color`

Чтобы исправить это, нам нужен `Dat.gui`, чтобы изменения работали. Мы можем сделать это, связав метод `onChange(...)` и обновив цвет материала с помощью `material.color.set(...)`. Этот метод очень полезен, мы можем поставить любой цвет и это работает не только для объектов, но и для сцены.

В настоящее время цвет задается в двух местах: в `parameters` и в `material`.

Хотя это не имеет большого значения, если мы хотим изменить цвет, нам придется сделать это в этих двух местах.

Давайте просто исправим это, используя свойство `parameters.color` в нашем материале:

```javascript
const material = new THREE.MeshBasicMaterial({ color: parameters.color });
```

## Функции

Чтобы запустить функцию мы должны добавить эту функцию к объекту. Мы можем использоват объект `parameters` , который мы создали ранее. Чтобы добавить свойство `spin`, содержащее функцию, которая будет анимировать куб мы делаем следующее:

```javascript
const parameters = {
  color: 0xff0000,
  spin: () => {
    gsap.to(mesh.rotation, { duration: 1, y: mesh.rotation.y + Math.PI * 2 });
  },
};
```

Далее добавляем кнопку:

```javascript
gui.add(parameters, "spin");
```
